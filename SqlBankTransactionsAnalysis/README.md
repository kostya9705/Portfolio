# Анализ банковских транзакций клиентов

## Описание проекта

Комплексный проект по построению аналитической системы на базе SQLite для анализа банковских транзакций клиентов. Включает создание базы данных, ETL-процессы для формирования аналитических витрин, SQL-запросы для сегментации клиентов и визуализацию расходов.

## Структура проекта

```
SqlBankTransactionsAnalysis/
├── create_tables.sql         # SQL-скрипт создания таблиц БД
├── import_data.py            # Python-скрипт импорта данных (чистый Python + csv)
├── import_data_pandas.ipynb  # Notebook с импортом данных через Pandas
├── etl.ipynb                 # ETL-процесс: витрина ежедневных трат
├── queries.ipynb             # SQL-запросы и аналитика
├── requirements.txt          # Зависимости проекта
├── data/
│   ├── categories.csv        # Справочник категорий покупок (MCC-коды)
│   ├── clients.csv           # Данные о клиентах
│   ├── subscriptions.csv     # Подписки клиентов
│   └── transactions.csv      # Транзакции клиентов
└── README.md
```

## Цели проекта

1. Создать локальную реляционную базу данных для хранения банковских данных
2. Реализовать ETL-пайплайн для формирования аналитических витрин
3. Провести анализ расходов клиентов по категориям
4. Сегментировать клиентов по уровню финансового риска
5. Визуализировать динамику и структуру расходов

## Структура данных

**Таблицы БД:**

| Таблица | Описание |
|---------|----------|
| `categories` | Справочник категорий покупок |
| `clients` | Профили клиентов | 
| `subscriptions` | Подписки клиентов |
| `transactions` | История транзакций |

## Ключевые этапы проекта

### 1. Создание БД и импорт данных

**SQL-схема** (`create_tables.sql`):
- Создание 4 таблиц с внешними ключами
- Проверочные ограничения
- Индексы для ускорения запросов

**Импорт данных:**
- Реализован батчевый импорт для оптимизации
- Два варианта импорта данных в базу данных: 
    - Чистый Python (`import_data.py`)
    - Pandas (`import_data_pandas.ipynb`)

### 2. ETL-процесс: витрина ежедневных трат
ETL пайплайн находится в файле `etl.ipynb` с реализацией следующих методов
- **Extract:**
    - Выборка расходных операций с привязкой к категориям
- **Transform:** 
    - Агрегация по категориям и датам
- **Load:**
    - Создание витрины `daily_spend`

### 3. SQL-аналитика и визуализация

Аналитические запросы находятся в файле `queries.ipynb`
- Топ клиентов по доходу
- Топ клиентов по суммарным расходам
- Категории с расходами выше среднего

### 4. Визуализация (Plotly)

- Динамика совокупных ежедневных трат за 2020 год
- Топ-10 категорий по суммарным расходам
- Тепловая карта расходов (месяц × день месяца)

## Запуск проекта

```bash
# 1. Установка зависимостей
pip install -r requirements.txt

# 2. Создание БД и импорт данных
python import_data.py
# или через notebook: import_data_pandas.ipynb
```

## Дальнейшее развитие

**Расширение аналитики:**
- Можно провести более детальный анализ данных

**Автоматизация:**
- Перенос ETL в отдельный скрипт с расписанием
- Построить полноценный дашборд для мониторинга ключевых метрик
